<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3 Test</title>
<script type="text/javascript" src="d3/d3.min.js"></script>
</head>

<body>
	<h1>Velkommen</h1>

	<script type="text/javascript">
		//d3.select("body").append("p").text("New paragraph!");

		d3.csv("data/food.csv", function(data){
			//console.log(data)
		});

		var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
						11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];

		/* Text append, the function of enter() method 
		d3.select("body").selectAll("p")
			.data(dataset)
			.enter()
			.append("p")
			.text(function(d) { return d; })
			.style("color", function(d) {
				if (d > 15) { //Threshold of 15
					return "red";
				} else {
					return "blue";
				}
				});
		*/

		var w = 500;
		var h = 100;

		var svg = d3.select("body")
					.append("svg")
					.attr("width", w) // <-- Here
					.attr("height", h); // <-- and here!

		//draw circes
		/*
		var circles = svg.selectAll("circle")
			.data(dataset)
			.enter()
			.append("circle");

		circles.attr("cx", function(d, i) {
			return (i * 50) + 25; 
			})
			.attr('color','green')
			.attr("cy", h/2)
			.attr("r", function(d) {
			return d;
			});
		*/
		var barWidth = 20;
		var barGap = 1;
		var magnifier = 3
		var textRelPositionY = 13;
		var textRelPositionX = 4;

		var rects = svg.selectAll("rect")
			.data(dataset)
			.enter()
			.append("rect")
			.attr("x", function(d,i){
				return i * (w / dataset.length);
			})
			.attr("y", function(d){
				return h - d*magnifier;
			})
			.attr("width", barWidth)
			.attr("height", function(d){
				return d*magnifier;	
			})
			.attr("fill", function(d) {
				return "rgb("+d*4+","+d*20+", " + (d * 10) + ")";
			});

			svg.selectAll('text')
			.data(dataset)
			.enter()
			.append('text')
			.text(function(d) {
				return d;
			})	
			.attr("x", function(d,i){
				return i * (w / dataset.length) + textRelPositionX;
			})
			.attr("y", function(d){
				return h - d*magnifier + textRelPositionY;
			})
			.attr("font-family", "sans-serif")
			.attr("font-size", "11px")
			.attr("fill", "black");

	</script>

	</body>
</html>